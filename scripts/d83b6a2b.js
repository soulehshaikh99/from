document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#tt"),t=$.qs("#io"),o=$.qs("#iq"),r=$.qs("#ij"),c=$.qs("#to"),l=$.qs("#iz"),n=$.qs("#x"),u=$.qs("#td"),a=$.qs("#nl"),s=$.qs("#rx"),i=$.qs("#t"),S=$.qs("#ts"),d=$.qs("#k"),y=$.qs("#il"),m=$.qs("#tp"),q=$.qs(".aw"),f=$.qs(".ff"),x=$.qs(".fj"),g=$.qs(".la"),v=$.qs("#rd"),h=$.qs("#j"),L=$.qsa(".um"),C=$.qs(".ai");function b(){for(const e of L)if(e.checked)return e.value;return null}function p(e){"basic"===(e=e||b())?$.conceal(c.closest(".mx"),l.closest(".mx"),C):$.reveal(C),$.conceal(m)}function N(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,o=e%100;return 1===t&&11!==o?"st_conflict":2===t&&12!==o?"nd_conflict":3===t&&13!==o?"rd_conflict":"th"})();return`${e}${t}`}function F(e,t){let o=e.querySelector(".stockavgcal__purchase-remove");function r(){t.removeChild(e),function(){const e=$.qs(".mh");for(let t=0;t<e.children.length;t++){const o=e.children[t],r=o.querySelector(".uk");let c=N(t+1);r.textContent=`${c} Purchase`,c=c.toLowerCase(),o.querySelector(".uj").setAttribute("for",`${c}-purchase`),o.querySelector(".at").id=`${c}-purchase`,o.querySelector(".an").setAttribute("for",`${c}-quantity`),o.querySelector(".ar").id=`${c}-quantity`}A()}(),_()}if(o)return o.removeEventListener("click",r),void o.addEventListener("click",r);o=document.createElement("img"),o.classList.add("stockavgcal__purchase-remove"),o.setAttribute("src","/assets/images/a6d3e123.svg"),e.querySelector(".uk").after(o),o.addEventListener("click",r)}function k(e){const t=e.querySelector(".stockavgcal__purchase-remove");t&&t.remove()}function A(){const e=$.qs(".mh"),t=$.qsa(".mp");if(t.length>=3)for(let o=0;o<2;o++)F(t[o],e);else for(let e=0;e<t.length;e++)k(t[e])}function E(e){const t=$.qsa(".uz");for(let o=0;o<t.length;o++){t[o].textContent=e}}function _(){const e=b(),i=$.qsa(".mp");let v=0,h=0,L=1/0,C=-1/0;const p=[];for(const e of i){const t=e.querySelector(".at"),o=e.querySelector(".ar"),r=parseFloat(t.value||0),c=parseFloat(o.value||0);v+=c,h+=r*c,L>r&&(L=r),C<r&&(C=r),p.push({buyPrice:r,quantity:c,invested:(r*c).toFixed(2)})}if(!h||!v)return;const F=v>0?h/v:0,k=Number(F.toFixed(2)).toLocaleString(),A=Number(v.toFixed(2)).toLocaleString(),E=Number(h.toFixed(2)).toLocaleString();t.textContent=k,o.textContent=A,r.textContent=E;const _=parseFloat(S.value||0),z=parseFloat(d.value||0),P=parseFloat(y.value||0);if(_>0&&v>0){const e=_*v-h,t=e/h*100;c.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,l.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,c.classList.toggle("ah",e>0),c.classList.toggle("ap",e<0),l.classList.toggle("ah",t>0),l.classList.toggle("ap",t<0),$.reveal(c.closest(".mx"),l.closest(".mx"))}else $.conceal(c.closest(".mx"),l.closest(".mx"));if(z>0||P>0){const e=z+P,t=(h+e)/v;if(n.textContent=Number(t.toFixed(2)).toLocaleString(),$.reveal(n.closest(".mx")),_>0){const t=_*v-h-e,o=t/h*100;u.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,a.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(u.closest(".mx"),a.closest(".mx"))}else $.conceal(u.closest(".mx"),a.closest(".mx"))}else $.conceal(n.closest(".mx"),u.closest(".mx"),a.closest(".mx"));$.reveal(s);const w=q.querySelectorAll(".mz");for(let e=1;e<w.length;e++)w[e].remove();let j=0,I=1/0,Z=-1/0,D=0,T=0;const M=w[0];for(let t=0;t<p.length;t++){const o=p[t],r=M.cloneNode(!0);let c=0;t===p.length-1?c=Number((100-j).toFixed(2)):h>0&&(c=(o.invested/h*100).toFixed(2),j+=Number(c)),I>c&&(I=c,D=o.buyPrice),Z<c&&(Z=c,T=o.buyPrice);const l=r.querySelector(".ft"),n=r.querySelector(".fr"),u=r.querySelector(".fs"),a=r.querySelector(".fu");if(r.querySelector(".ge").textContent=`${N(t+1)} Purchase`,r.querySelector(".a_").textContent=o.buyPrice.toLocaleString(),r.querySelector(".aq").textContent=o.quantity.toLocaleString(),r.querySelector(".fe").textContent=Number(o.invested).toLocaleString(),r.querySelector(".fa").textContent=`${Number(c)}%`,"basic"===e?$.conceal(l,n,u,a):$.reveal(l,n,u,a),"advanced"===e&&_>0){const e=r.querySelector(".fi"),t=r.querySelector(".fo"),c=(_*o.quantity).toFixed(2),l=(c-o.invested).toFixed(2),n=(l/o.invested*100).toFixed(2);r.querySelector(".fn").textContent=Number(c).toLocaleString(),e.textContent=`${l>=0?"+":""}${Number(l).toLocaleString()}`,t.textContent=`${n>=0?"+":""}${Number(n).toLocaleString()}%`,e.classList.toggle("ah",l>0),e.classList.toggle("ap",l<0),t.classList.toggle("ah",l>0),t.classList.toggle("ap",l<0)}else $.conceal(l,n,u);q.querySelector(".ax").appendChild(r)}M.remove();const O=f.querySelector(".fl"),R=f.querySelector(".fy"),U=f.querySelector(".fw"),V=f.querySelector(".fk");if("basic"===e?$.conceal(O,R,U,V):$.reveal(O,R,U,V),f.querySelector(".fp").textContent=k,f.querySelector(".fv").textContent=A,f.querySelector(".fg").textContent=E,"advanced"===e&&_>0){const e=_*v,t=e-h,o=t/h*100,r=f.querySelector(".fx"),c=f.querySelector(".f_");f.querySelector(".fc").textContent=_.toLocaleString(),f.querySelector(".fb").textContent=Number(e).toLocaleString(),r.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,c.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,r.classList.toggle("ah",t>0),r.classList.toggle("ap",t<0),c.classList.toggle("ah",t>0),c.classList.toggle("ap",t<0)}else $.conceal(O,R,U,V);if(T===D?$.conceal(g.querySelector(".lf"),g.querySelector(".lc")):($.reveal(g.querySelector(".lf"),g.querySelector(".lc")),g.querySelector(".ll").textContent=Number(T).toLocaleString(),g.querySelector(".lh").textContent=Number(D).toLocaleString()),L===C?$.conceal(g.querySelector(".lp"),g.querySelector(".lv")):($.reveal(g.querySelector(".lp"),g.querySelector(".lv")),g.querySelector(".ld").textContent=Number(L).toLocaleString(),g.querySelector(".lm").textContent=Number(C).toLocaleString()),"advanced"===e&&(z>0||P>0)){const e=z+P,t=(h+e)/v,o=t-F;if(x.querySelector(".fz").textContent=e.toLocaleString(),x.querySelector(".lr").textContent=Number(t.toFixed(2)).toLocaleString(),x.querySelector(".lt").textContent=Number(o.toFixed(2)).toLocaleString(),_>0){const t=_*v-h-e,o=t/h*100;x.querySelector(".ls").textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,x.querySelector(".lu").textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(x.querySelector(".li"),x.querySelector(".lo"))}else $.conceal(x.querySelector(".li"),x.querySelector(".lo"));$.reveal(x)}else $.conceal(x);$.reveal(m,q,f),T!==D||L!==C?$.reveal(g):$.conceal(g)}$.qs("#z").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tv").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),p(),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),E(t)})),i.addEventListener("click",(()=>{!function(){const e=$.qs(".mh");let t=N(e.children.length+1);const o=$.qs(".mp").cloneNode(!0);o.querySelector(".uk").textContent=`${t} Purchase`,t=t.toLowerCase(),o.querySelector(".uj").setAttribute("for",`${t}-purchase`),o.querySelector(".at").id=`${t}-purchase`,o.querySelector(".an").setAttribute("for",`${t}-quantity`),o.querySelector(".ar").id=`${t}-quantity`,o.querySelector(".at").value="",o.querySelector(".ar").value="",e.appendChild(o),F(o,e),A()}()})),h.addEventListener("click",(()=>{_()})),v.addEventListener("click",(()=>{!function(){const e=$.qsa(".mp");for(const t of e){const e=t.querySelector(".at"),o=t.querySelector(".ar");e.value=0,o.value=0}t.textContent=0,o.textContent=0,r.textContent=0,S.value=0,$.conceal(c.closest(".mx"),l.closest(".mx"),n.closest(".mx"),u.closest(".mx"),a.closest(".mx"),s,m,q,f,x,g);const i=q.querySelectorAll(".mz");for(let e=1;e<i.length;e++)i[e].remove()}()}));for(const e of L)e.addEventListener("change",(e=>{p(e.target.value)}));const d=sessionStorage.getItem("currency-preference");d&&(e.value=d,E(d)),s.addEventListener("click",(function(){m.scrollIntoView({behavior:"smooth"})}))}()}));