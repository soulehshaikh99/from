document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#tt"),t=$.qs("#io"),o=$.qs("#iq"),r=$.qs("#ij"),c=$.qs("#to"),n=$.qs("#iz"),l=$.qs("#x"),u=$.qs("#td"),s=$.qs("#nl"),i=$.qs("#rx"),a=$.qs("#t"),d=$.qs("#ts"),S=$.qs("#k"),m=$.qs("#il"),q=$.qs("#tp"),y=$.qs(".dp"),v=$.qs(".dd"),g=$.qs(".dv"),f=$.qs(".dm"),x=$.qs("#rd"),b=$.qs("#j"),L=$.qsa(".ge"),p=$.qs(".ml");function h(){for(const e of L)if(e.checked)return e.value;return null}function C(e){"basic"===(e=e||h())?$.conceal(c.closest(".pb"),n.closest(".pb"),p):$.reveal(p),$.conceal(q)}function N(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,o=e%100;return 1===t&&11!==o?"st_conflict":2===t&&12!==o?"nd_conflict":3===t&&13!==o?"rd_conflict":"th"})();return`${e}${t}`}function F(e,t){let o=e.querySelector(".dr");function r(){t.removeChild(e),function(){const e=$.qs(".pl");for(let t=0;t<e.children.length;t++){const o=e.children[t],r=o.querySelector(".mq");let c=N(t+1);r.textContent=`${c} Purchase`,c=c.toLowerCase(),o.querySelector(".mv").setAttribute("for",`${c}-purchase`),o.querySelector(".mw").id=`${c}-purchase`,o.querySelector(".mm").setAttribute("for",`${c}-quantity`),o.querySelector(".mf").id=`${c}-quantity`}E()}(),k()}if(o)return o.removeEventListener("click",r),void o.addEventListener("click",r);o=document.createElement("img"),o.classList.add("dr"),o.setAttribute("src","/assets/images/a6d3e123.svg"),e.querySelector(".mq").after(o),o.addEventListener("click",r)}function A(e){const t=e.querySelector(".dr");t&&t.remove()}function E(){const e=$.qs(".pl"),t=$.qsa(".pc");if(t.length>=3)for(let o=0;o<2;o++)F(t[o],e);else for(let e=0;e<t.length;e++)A(t[e])}function w(e){const t=$.qsa(".my");for(let o=0;o<t.length;o++){t[o].textContent=e}}function k(){const e=h(),a=$.qsa(".pc");let x=0,b=0,L=1/0,p=-1/0;const C=[];for(const e of a){const t=e.querySelector(".mw"),o=e.querySelector(".mf"),r=parseFloat(t.value||0),c=parseFloat(o.value||0);x+=c,b+=r*c,L>r&&(L=r),p<r&&(p=r),C.push({buyPrice:r,quantity:c,invested:(r*c).toFixed(2)})}if(!b||!x)return;const F=x>0?b/x:0,A=Number(F.toFixed(2)).toLocaleString(),E=Number(x.toFixed(2)).toLocaleString(),w=Number(b.toFixed(2)).toLocaleString();t.textContent=A,o.textContent=E,r.textContent=w;const k=parseFloat(d.value||0),z=parseFloat(S.value||0),P=parseFloat(m.value||0);if(k>0&&x>0){const e=k*x-b,t=e/b*100;c.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,n.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,c.classList.toggle("mc",e>0),c.classList.toggle("mh",e<0),n.classList.toggle("mc",t>0),n.classList.toggle("mh",t<0),$.reveal(c.closest(".pb"),n.closest(".pb"))}else $.conceal(c.closest(".pb"),n.closest(".pb"));if(z>0||P>0){const e=z+P,t=(b+e)/x;if(l.textContent=Number(t.toFixed(2)).toLocaleString(),$.reveal(l.closest(".pb")),k>0){const t=k*x-b-e,o=t/b*100;u.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,s.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(u.closest(".pb"),s.closest(".pb"))}else $.conceal(u.closest(".pb"),s.closest(".pb"))}else $.conceal(l.closest(".pb"),u.closest(".pb"),s.closest(".pb"));$.reveal(i);const j=y.querySelectorAll(".pq");for(let e=1;e<j.length;e++)j[e].remove();let _=0,I=1/0,Z=-1/0,D=0,T=0;const M=j[0];for(let t=0;t<C.length;t++){const o=C[t],r=M.cloneNode(!0);let c=0;t===C.length-1?c=Number((100-_).toFixed(2)):b>0&&(c=(o.invested/b*100).toFixed(2),_+=Number(c)),I>c&&(I=c,D=o.buyPrice),Z<c&&(Z=c,T=o.buyPrice);const n=r.querySelector(".d_"),l=r.querySelector(".dq"),u=r.querySelector(".ve"),s=r.querySelector(".vn");if(r.querySelector(".pz").textContent=`${N(t+1)} Purchase`,r.querySelector(".dy").textContent=o.buyPrice.toLocaleString(),r.querySelector(".dw").textContent=o.quantity.toLocaleString(),r.querySelector(".dk").textContent=Number(o.invested).toLocaleString(),r.querySelector(".vr").textContent=`${Number(c)}%`,"basic"===e?$.conceal(n,l,u,s):$.reveal(n,l,u,s),"advanced"===e&&k>0){const e=r.querySelector(".dz"),t=r.querySelector(".vt"),c=(k*o.quantity).toFixed(2),n=(c-o.invested).toFixed(2),l=(n/o.invested*100).toFixed(2);r.querySelector(".dj").textContent=Number(c).toLocaleString(),e.textContent=`${n>=0?"+":""}${Number(n).toLocaleString()}`,t.textContent=`${l>=0?"+":""}${Number(l).toLocaleString()}%`,e.classList.toggle("mc",n>0),e.classList.toggle("mh",n<0),t.classList.toggle("mc",n>0),t.classList.toggle("mh",n<0)}else $.conceal(n,l,u);y.querySelector(".pj").appendChild(r)}M.remove();const O=v.querySelector(".vi"),R=v.querySelector(".vh"),U=v.querySelector(".vd"),V=v.querySelector(".vm");if("basic"===e?$.conceal(O,R,U,V):$.reveal(O,R,U,V),v.querySelector(".vu").textContent=A,v.querySelector(".vf").textContent=E,v.querySelector(".vc").textContent=w,"advanced"===e&&k>0){const e=k*x,t=e-b,o=t/b*100,r=v.querySelector(".vv"),c=v.querySelector(".vg");v.querySelector(".vs").textContent=k.toLocaleString(),v.querySelector(".vp").textContent=Number(e).toLocaleString(),r.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,c.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,r.classList.toggle("mc",t>0),r.classList.toggle("mh",t<0),c.classList.toggle("mc",t>0),c.classList.toggle("mh",t<0)}else $.conceal(O,R,U,V);if(T===D?$.conceal(f.querySelector(".mt"),f.querySelector(".mr")):($.reveal(f.querySelector(".mt"),f.querySelector(".mr")),f.querySelector(".mn").textContent=Number(T).toLocaleString(),f.querySelector(".mi").textContent=Number(D).toLocaleString()),L===p?$.conceal(f.querySelector(".ms"),f.querySelector(".mu")):($.reveal(f.querySelector(".ms"),f.querySelector(".mu")),f.querySelector(".mo").textContent=Number(L).toLocaleString(),f.querySelector(".ma").textContent=Number(p).toLocaleString()),"advanced"===e&&(z>0||P>0)){const e=z+P,t=(b+e)/x,o=t-F;if(g.querySelector(".vb").textContent=e.toLocaleString(),g.querySelector(".v_").textContent=Number(t.toFixed(2)).toLocaleString(),g.querySelector(".vx").textContent=Number(o.toFixed(2)).toLocaleString(),k>0){const t=k*x-b-e,o=t/b*100;g.querySelector(".vq").textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,g.querySelector(".me").textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(g.querySelector(".vj"),g.querySelector(".vz"))}else $.conceal(g.querySelector(".vj"),g.querySelector(".vz"));$.reveal(g)}else $.conceal(g);$.reveal(q,y,v),T!==D||L!==p?$.reveal(f):$.conceal(f)}$.qs("#z").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tv").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),C(),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),w(t)})),a.addEventListener("click",(()=>{!function(){const e=$.qs(".pl");let t=N(e.children.length+1);const o=$.qs(".pc").cloneNode(!0);o.querySelector(".mq").textContent=`${t} Purchase`,t=t.toLowerCase(),o.querySelector(".mv").setAttribute("for",`${t}-purchase`),o.querySelector(".mw").id=`${t}-purchase`,o.querySelector(".mm").setAttribute("for",`${t}-quantity`),o.querySelector(".mf").id=`${t}-quantity`,o.querySelector(".mw").value="",o.querySelector(".mf").value="",e.appendChild(o),F(o,e),E()}()})),b.addEventListener("click",(()=>{k()})),x.addEventListener("click",(()=>{!function(){const e=$.qsa(".pc");for(const t of e){const e=t.querySelector(".mw"),o=t.querySelector(".mf");e.value=0,o.value=0}t.textContent=0,o.textContent=0,r.textContent=0,d.value=0,$.conceal(c.closest(".pb"),n.closest(".pb"),l.closest(".pb"),u.closest(".pb"),s.closest(".pb"),i,q,y,v,g,f);const a=y.querySelectorAll(".pq");for(let e=1;e<a.length;e++)a[e].remove()}()}));for(const e of L)e.addEventListener("change",(e=>{C(e.target.value)}));const S=sessionStorage.getItem("currency-preference");S&&(e.value=S,w(S)),i.addEventListener("click",(function(){q.scrollIntoView({behavior:"smooth"})}))}()}));