document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#tt"),t=$.qs("#io"),o=$.qs("#iq"),r=$.qs("#ij"),c=$.qs("#to"),n=$.qs("#iz"),l=$.qs("#x"),u=$.qs("#td"),s=$.qs("#nl"),a=$.qs("#rx"),i=$.qs("#t"),S=$.qs("#ts"),d=$.qs("#k"),y=$.qs("#il"),q=$.qs("#tp"),g=$.qs(".ff"),m=$.qs(".fq"),f=$.qs(".lp"),v=$.qs(".lj"),x=$.qs("#rd"),L=$.qs("#j"),b=$.qsa(".as"),h=$.qs(".aw");function C(){for(const e of b)if(e.checked)return e.value;return null}function N(e){"basic"===(e=e||C())?$.conceal(c.closest(".gn"),n.closest(".gn"),h):$.reveal(h),$.conceal(q)}function F(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,o=e%100;return 1===t&&11!==o?"st_conflict":2===t&&12!==o?"nd_conflict":3===t&&13!==o?"rd_conflict":"th"})();return`${e}${t}`}function p(e,t){let o=e.querySelector(".stockavgcal__purchase-remove");function r(){t.removeChild(e),function(){const e=$.qs(".mw");for(let t=0;t<e.children.length;t++){const o=e.children[t],r=o.querySelector(".ac");let c=F(t+1);r.textContent=`${c} Purchase`,c=c.toLowerCase(),o.querySelector(".ap").setAttribute("for",`${c}-purchase`),o.querySelector(".ag").id=`${c}-purchase`,o.querySelector(".ay").setAttribute("for",`${c}-quantity`),o.querySelector(".ab").id=`${c}-quantity`}A()}(),w()}if(o)return o.removeEventListener("click",r),void o.addEventListener("click",r);o=document.createElement("img"),o.classList.add("stockavgcal__purchase-remove"),o.setAttribute("src","/assets/images/8ee27068.svg"),e.querySelector(".ac").after(o),o.addEventListener("click",r)}function k(e){const t=e.querySelector(".stockavgcal__purchase-remove");t&&t.remove()}function A(){const e=$.qs(".mw"),t=$.qsa(".mx");if(t.length>=3)for(let o=0;o<2;o++)p(t[o],e);else for(let e=0;e<t.length;e++)k(t[e])}function E(e){const t=$.qsa(".av");for(let o=0;o<t.length;o++){t[o].textContent=e}}function w(){const e=C(),i=$.qsa(".mx");let x=0,L=0,b=1/0,h=-1/0;const N=[];for(const e of i){const t=e.querySelector(".ag"),o=e.querySelector(".ab"),r=parseFloat(t.value||0),c=parseFloat(o.value||0);x+=c,L+=r*c,b>r&&(b=r),h<r&&(h=r),N.push({buyPrice:r,quantity:c,invested:(r*c).toFixed(2)})}if(!L||!x)return;const p=x>0?L/x:0,k=Number(p.toFixed(2)).toLocaleString(),A=Number(x.toFixed(2)).toLocaleString(),E=Number(L.toFixed(2)).toLocaleString();t.textContent=k,o.textContent=A,r.textContent=E;const w=parseFloat(S.value||0),_=parseFloat(d.value||0),P=parseFloat(y.value||0);if(w>0&&x>0){const e=w*x-L,t=e/L*100;c.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,n.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,c.classList.toggle("ft",e>0),c.classList.toggle("fn",e<0),n.classList.toggle("ft",t>0),n.classList.toggle("fn",t<0),$.reveal(c.closest(".gn"),n.closest(".gn"))}else $.conceal(c.closest(".gn"),n.closest(".gn"));if(_>0||P>0){const e=_+P,t=(L+e)/x;if(l.textContent=Number(t.toFixed(2)).toLocaleString(),$.reveal(l.closest(".gn")),w>0){const t=w*x-L-e,o=t/L*100;u.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,s.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(u.closest(".gn"),s.closest(".gn"))}else $.conceal(u.closest(".gn"),s.closest(".gn"))}else $.conceal(l.closest(".gn"),u.closest(".gn"),s.closest(".gn"));$.reveal(a);const z=g.querySelectorAll(".gu");for(let e=1;e<z.length;e++)z[e].remove();let j=0,I=1/0,Z=-1/0,D=0,T=0;const M=z[0];for(let t=0;t<N.length;t++){const o=N[t],r=M.cloneNode(!0);let c=0;t===N.length-1?c=Number((100-j).toFixed(2)):L>0&&(c=(o.invested/L*100).toFixed(2),j+=Number(c)),I>c&&(I=c,D=o.buyPrice),Z<c&&(Z=c,T=o.buyPrice);const n=r.querySelector(".fg"),l=r.querySelector(".fb"),u=r.querySelector(".fx"),s=r.querySelector(".f_");if(r.querySelector(".ga").textContent=`${F(t+1)} Purchase`,r.querySelector(".fh").textContent=o.buyPrice.toLocaleString(),r.querySelector(".fd").textContent=o.quantity.toLocaleString(),r.querySelector(".fm").textContent=Number(o.invested).toLocaleString(),r.querySelector(".fj").textContent=`${Number(c)}%`,"basic"===e?$.conceal(n,l,u,s):$.reveal(n,l,u,s),"advanced"===e&&w>0){const e=r.querySelector(".fw"),t=r.querySelector(".fk"),c=(w*o.quantity).toFixed(2),n=(c-o.invested).toFixed(2),l=(n/o.invested*100).toFixed(2);r.querySelector(".fy").textContent=Number(c).toLocaleString(),e.textContent=`${n>=0?"+":""}${Number(n).toLocaleString()}`,t.textContent=`${l>=0?"+":""}${Number(l).toLocaleString()}%`,e.classList.toggle("ft",n>0),e.classList.toggle("fn",n<0),t.classList.toggle("ft",n>0),t.classList.toggle("fn",n<0)}else $.conceal(n,l,u);g.querySelector(".fl").appendChild(r)}M.remove();const O=m.querySelector(".fz"),R=m.querySelector(".lu"),U=m.querySelector(".lf"),V=m.querySelector(".lc");if("basic"===e?$.conceal(O,R,U,V):$.reveal(O,R,U,V),m.querySelector(".ln").textContent=k,m.querySelector(".li").textContent=A,m.querySelector(".lo").textContent=E,"advanced"===e&&w>0){const e=w*x,t=e-L,o=t/L*100,r=m.querySelector(".ll"),c=m.querySelector(".lh");m.querySelector(".le").textContent=w.toLocaleString(),m.querySelector(".la").textContent=Number(e).toLocaleString(),r.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,c.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,r.classList.toggle("ft",t>0),r.classList.toggle("fn",t<0),c.classList.toggle("ft",t>0),c.classList.toggle("fn",t<0)}else $.conceal(O,R,U,V);if(T===D?$.conceal(v.querySelector(".lq"),v.querySelector(".ce")):($.reveal(v.querySelector(".lq"),v.querySelector(".ce")),v.querySelector(".lz").textContent=Number(T).toLocaleString(),v.querySelector(".ct").textContent=Number(D).toLocaleString()),b===h?$.conceal(v.querySelector(".cn"),v.querySelector(".ci")):($.reveal(v.querySelector(".cn"),v.querySelector(".ci")),v.querySelector(".cr").textContent=Number(b).toLocaleString(),v.querySelector(".cs").textContent=Number(h).toLocaleString()),"advanced"===e&&(_>0||P>0)){const e=_+P,t=(L+e)/x,o=t-p;if(f.querySelector(".lv").textContent=e.toLocaleString(),f.querySelector(".lb").textContent=Number(t.toFixed(2)).toLocaleString(),f.querySelector(".lg").textContent=Number(o.toFixed(2)).toLocaleString(),w>0){const t=w*x-L-e,o=t/L*100;f.querySelector(".lx").textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,f.querySelector(".l_").textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(f.querySelector(".lw"),f.querySelector(".lk"))}else $.conceal(f.querySelector(".lw"),f.querySelector(".lk"));$.reveal(f)}else $.conceal(f);$.reveal(q,g,m),T!==D||b!==h?$.reveal(v):$.conceal(v)}$.qs("#z").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tv").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),N(),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),E(t)})),i.addEventListener("click",(()=>{!function(){const e=$.qs(".mw");let t=F(e.children.length+1);const o=$.qs(".mx").cloneNode(!0);o.querySelector(".ac").textContent=`${t} Purchase`,t=t.toLowerCase(),o.querySelector(".ap").setAttribute("for",`${t}-purchase`),o.querySelector(".ag").id=`${t}-purchase`,o.querySelector(".ay").setAttribute("for",`${t}-quantity`),o.querySelector(".ab").id=`${t}-quantity`,o.querySelector(".ag").value="",o.querySelector(".ab").value="",e.appendChild(o),p(o,e),A()}()})),L.addEventListener("click",(()=>{w()})),x.addEventListener("click",(()=>{!function(){const e=$.qsa(".mx");for(const t of e){const e=t.querySelector(".ag"),o=t.querySelector(".ab");e.value=0,o.value=0}t.textContent=0,o.textContent=0,r.textContent=0,S.value=0,d.value=0,y.value=0,$.conceal(c.closest(".gn"),n.closest(".gn"),l.closest(".gn"),u.closest(".gn"),s.closest(".gn"),a,q,g,m,f,v);const i=g.querySelectorAll(".gu");for(let e=1;e<i.length;e++)i[e].remove()}()}));for(const e of b)e.addEventListener("change",(e=>{N(e.target.value)}));const h=sessionStorage.getItem("currency-preference");h&&(e.value=h,E(h)),a.addEventListener("click",(function(){q.scrollIntoView({behavior:"smooth"})}))}()}));