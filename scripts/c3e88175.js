document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#tt"),t=$.qs("#is"),o=$.qs("#ij"),r=$.qs("#i_"),c=$.qs("#to"),n=$.qs("#iq"),l=$.qs("#x"),u=$.qs("#td"),s=$.qs("#nl"),i=$.qs("#t"),a=$.qs("#ts"),d=$.qs("#k"),S=$.qs("#if"),y=$.qs("#tp"),m=$.qs(".dc"),q=$.qs(".dh"),v=$.qs(".dp"),g=$.qs(".dd"),f=$.qs("#rd"),x=$.qs("#j"),L=$.qsa(".mq"),p=$.qs(".ma");function C(){for(const e of L)if(e.checked)return e.value;return null}function h(e){"basic"===(e=e||C())?$.conceal(c.closest(".py"),n.closest(".py"),p):$.reveal(p),$.conceal(y)}function b(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,o=e%100;return 1===t&&11!==o?"st_conflict":2===t&&12!==o?"nd_conflict":3===t&&13!==o?"rd_conflict":"th"})();return`${e}${t}`}function N(e,t){let o=e.querySelector(".dt");function r(){t.removeChild(e),function(){const e=$.qs(".pf");for(let t=0;t<e.children.length;t++){const o=e.children[t],r=o.querySelector(".m_");let c=b(t+1);r.textContent=`${c} Purchase`,c=c.toLowerCase(),o.querySelector(".mp").setAttribute("for",`${c}-purchase`),o.querySelector(".my").id=`${c}-purchase`,o.querySelector(".md").setAttribute("for",`${c}-quantity`),o.querySelector(".mu").id=`${c}-quantity`}A()}(),_()}if(o)return o.removeEventListener("click",r),void o.addEventListener("click",r);o=document.createElement("img"),o.classList.add("dt"),o.setAttribute("src","/assets/images/a6d3e123.svg"),e.querySelector(".m_").after(o),o.addEventListener("click",r)}function F(e){const t=e.querySelector(".dt");t&&t.remove()}function A(){const e=$.qs(".pf"),t=$.qsa(".pl");if(t.length>=3)for(let o=0;o<2;o++)N(t[o],e);else for(let e=0;e<t.length;e++)F(t[e])}function E(e){const t=$.qsa(".mm");for(let o=0;o<t.length;o++){t[o].textContent=e}}function _(){const e=C(),i=$.qsa(".pl");let f=0,x=0,L=1/0,p=-1/0;const h=[];for(const e of i){const t=e.querySelector(".my"),o=e.querySelector(".mu"),r=parseFloat(t.value||0),c=parseFloat(o.value||0);f+=c,x+=r*c,L>r&&(L=r),p<r&&(p=r),h.push({buyPrice:r,quantity:c,invested:(r*c).toFixed(2)})}if(!x||!f)return;const N=f>0?x/f:0,F=Number(N.toFixed(2)).toLocaleString(),A=Number(f.toFixed(2)).toLocaleString(),E=Number(x.toFixed(2)).toLocaleString();t.textContent=F,o.textContent=A,r.textContent=E;const _=parseFloat(a.value||0),k=parseFloat(d.value||0),P=parseFloat(S.value||0);if(_>0&&f>0){const e=_*f-x,t=e/x*100;c.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,n.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,c.classList.toggle("mf",e>0),c.classList.toggle("ml",e<0),n.classList.toggle("mf",t>0),n.classList.toggle("ml",t<0),$.reveal(c.closest(".py"),n.closest(".py"))}else $.conceal(c.closest(".py"),n.closest(".py"));if(k>0||P>0){const e=k+P,t=(x+e)/f;if(l.textContent=Number(t.toFixed(2)).toLocaleString(),_>0){const t=_*f-x-e,o=t/x*100;u.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,s.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(u.closest(".py"),s.closest(".py"))}else $.conceal(u.closest(".py"),s.closest(".py"));$.reveal(l)}else $.conceal(l,u,s);const z=m.querySelectorAll(".p_");for(let e=1;e<z.length;e++)z[e].remove();let j=0,w=1/0,I=-1/0,Z=0,D=0;const T=z[0];for(let t=0;t<h.length;t++){const o=h[t],r=T.cloneNode(!0);let c=0;t===h.length-1?c=Number((100-j).toFixed(2)):x>0&&(c=(o.invested/x*100).toFixed(2),j+=Number(c)),w>c&&(w=c,Z=o.buyPrice),I<c&&(I=c,D=o.buyPrice);const n=r.querySelector(".dx"),l=r.querySelector(".d_"),u=r.querySelector(".dq"),s=r.querySelector(".ve");if(r.querySelector(".pj").textContent=`${b(t+1)} Purchase`,r.querySelector(".dm").textContent=o.buyPrice.toLocaleString(),r.querySelector(".dy").textContent=o.quantity.toLocaleString(),r.querySelector(".dw").textContent=Number(o.invested).toLocaleString(),r.querySelector(".vt").textContent=`${Number(c)}%`,"basic"===e?$.conceal(n,l,u,s):$.reveal(n,l,u,s),"advanced"===e&&_>0){const e=r.querySelector(".dj"),t=r.querySelector(".dz"),c=(_*o.quantity).toFixed(2),n=(c-o.invested).toFixed(2),l=(n/o.invested*100).toFixed(2);r.querySelector(".dk").textContent=Number(c).toLocaleString(),e.textContent=`${n>=0?"+":""}${Number(n).toLocaleString()}`,t.textContent=`${l>=0?"+":""}${Number(l).toLocaleString()}%`,e.classList.toggle("mf",n>0),e.classList.toggle("ml",n<0),t.classList.toggle("mf",n>0),t.classList.toggle("ml",n<0)}else $.conceal(n,l,u);m.appendChild(r)}T.remove();const M=q.querySelector(".vn"),O=q.querySelector(".vl"),R=q.querySelector(".vh"),U=q.querySelector(".vd");if("basic"===e?$.conceal(M,O,R,U):$.reveal(M,O,R,U),q.querySelector(".vs").textContent=F,q.querySelector(".vu").textContent=A,q.querySelector(".vf").textContent=E,"advanced"===e&&_>0){const e=_*f,t=e-x,o=t/x*100,r=q.querySelector(".vp"),c=q.querySelector(".vv");q.querySelector(".vr").textContent=_.toLocaleString(),q.querySelector(".vc").textContent=Number(e).toLocaleString(),r.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,c.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,r.classList.toggle("mf",t>0),r.classList.toggle("ml",t<0),c.classList.toggle("mf",t>0),c.classList.toggle("ml",t<0)}else $.conceal(M,O,R,U);if(D===Z?$.conceal(g.querySelector(".vz"),g.querySelector(".mt")):($.reveal(g.querySelector(".vz"),g.querySelector(".mt")),g.querySelector(".me").textContent=Number(D).toLocaleString(),g.querySelector(".mn").textContent=Number(Z).toLocaleString()),L===p?$.conceal(g.querySelector(".mr"),g.querySelector(".ms")):($.reveal(g.querySelector(".mr"),g.querySelector(".ms")),g.querySelector(".mi").textContent=Number(L).toLocaleString(),g.querySelector(".mo").textContent=Number(p).toLocaleString()),"advanced"===e&&(k>0||P>0)){const e=k+P,t=(x+e)/f,o=t-N;if(v.querySelector(".vg").textContent=e.toLocaleString(),v.querySelector(".vx").textContent=Number(t.toFixed(2)).toLocaleString(),v.querySelector(".vb").textContent=Number(o.toFixed(2)).toLocaleString(),_>0){const t=_*f-x-e,o=t/x*100;v.querySelector(".v_").textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,v.querySelector(".vq").textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(v.querySelector(".vk"),v.querySelector(".vj"))}else $.conceal(v.querySelector(".vk"),v.querySelector(".vj"));$.reveal(v)}else $.conceal(v);$.reveal(y,m,q),D!==Z||L!==p?$.reveal(g):$.conceal(g)}$.qs("#z").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tv").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),h(),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),E(t)})),i.addEventListener("click",(()=>{!function(){const e=$.qs(".pf");let t=b(e.children.length+1);const o=$.qs(".pl").cloneNode(!0);o.querySelector(".m_").textContent=`${t} Purchase`,t=t.toLowerCase(),o.querySelector(".mp").setAttribute("for",`${t}-purchase`),o.querySelector(".my").id=`${t}-purchase`,o.querySelector(".md").setAttribute("for",`${t}-quantity`),o.querySelector(".mu").id=`${t}-quantity`,o.querySelector(".my").value="",o.querySelector(".mu").value="",e.appendChild(o),N(o,e),A()}()})),x.addEventListener("click",(()=>{_()})),f.addEventListener("click",(()=>{!function(){const e=$.qsa(".pl");for(const t of e){const e=t.querySelector(".my"),o=t.querySelector(".mu");e.value=0,o.value=0}t.textContent=0,o.textContent=0,r.textContent=0,a.value=0,$.conceal(c.closest(".py"),n.closest(".py"),y,m,q,v,g);const l=m.querySelectorAll(".p_");for(let e=1;e<l.length;e++)l[e].remove()}()}));for(const e of L)e.addEventListener("change",(e=>{h(e.target.value)}));const l=sessionStorage.getItem("currency-preference");l&&(e.value=l,E(l))}()}));