!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#tn"),t=$.qs("#ip"),o=$.qs("#sf"),r=$.qs("#sa"),c=$.qs("#tu"),n=$.qs("#sl"),l=$.qs("#k"),u=$.qs("#tv"),s=$.qs("#nv"),i=$.qs("#it"),a=$.qs("#t"),d=$.qs("#to"),S=$.qs("#_"),q=$.qs("#ig"),y=$.qs("#td"),h=$.qs(".pp"),v=$.qs(".ds"),m=$.qs(".dw"),g=$.qs(".vi"),x=$.qs("#rx"),f=$.qs("#q"),L=$.qsa(".cy"),p=$.qs(".hm");function C(){for(const e of L)if(e.checked)return e.value;return null}function b(e){"basic"===(e=e||C())?$.conceal(c.closest(".hq"),n.closest(".hq"),p):$.reveal(p),$.conceal(y)}function N(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,o=e%100;return 1===t&&11!==o?"st_conflict":2===t&&12!==o?"nd_conflict":3===t&&13!==o?"rd_conflict":"th"})();return`${e}${t}`}function F(e,t){let o=e.querySelector(".yk");function r(){t.removeChild(e),function(){const e=$.qs(".ht");for(let t=0;t<e.children.length;t++){const o=e.children[t],r=o.querySelector(".hi");let c=N(t+1);r.textContent=`${c} Purchase`,c=c.toLowerCase(),o.querySelector(".ha").setAttribute("for",`${c}-purchase`),o.querySelector(".hh").id=`${c}-purchase`,o.querySelector(".hp").setAttribute("for",`${c}-quantity`),o.querySelector(".hd").id=`${c}-quantity`}E()}(),P()}if(o)return o.removeEventListener("click",r),void o.addEventListener("click",r);o=document.createElement("button"),o.classList.add("yk"),o.type="button";const c=document.createElement("img");c.classList.add("y_"),c.setAttribute("src","/assets/images/ce3b389d.svg"),c.setAttribute("alt","Remove purchase entry"),o.appendChild(c),e.querySelector(".hi").after(o),o.addEventListener("click",r)}function A(e){const t=e.querySelector(".yk");t&&t.remove()}function E(){const e=$.qs(".ht"),t=$.qsa(".hn");if(t.length>=3)for(let o=0;o<2;o++)F(t[o],e);else for(let e=0;e<t.length;e++)A(t[e])}function k(e){const t=$.qsa(".hl");for(let o=0;o<t.length;o++){const r=t[o];r.classList.remove("nx"),r.textContent=e}}function P(){const e=C(),a=$.qsa(".hn");let x=0,f=0,L=1/0,p=-1/0;const b=[];for(const e of a){const t=e.querySelector(".hh"),o=e.querySelector(".hd"),r=parseFloat(t.value||0),c=parseFloat(o.value||0);x+=c,f+=r*c,L>r&&(L=r),p<r&&(p=r),b.push({buyPrice:r,quantity:c,invested:(r*c).toFixed(2)})}if(!f||!x)return;const F=x>0?f/x:0,A=Number(F.toFixed(2)).toLocaleString(),E=Number(x.toFixed(2)).toLocaleString(),k=Number(f.toFixed(2)).toLocaleString();t.textContent=A,o.textContent=E,r.textContent=k;const P=parseFloat(d.value||0),_=parseFloat(S.value||0),w=parseFloat(q.value||0);if(P>0&&x>0){const e=P*x-f,t=e/f*100;c.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,n.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,c.classList.toggle("pt",e>0),c.classList.toggle("pn",e<0),n.classList.toggle("pt",t>0),n.classList.toggle("pn",t<0),$.reveal(c.closest(".hq"),n.closest(".hq"))}else $.conceal(c.closest(".hq"),n.closest(".hq"));if(_>0||w>0){const e=_+w,t=(f+e)/x;if(l.textContent=Number(t.toFixed(2)).toLocaleString(),$.reveal(l.closest(".hq")),P>0){const t=P*x-f-e,o=t/f*100;u.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,s.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(u.closest(".hq"),s.closest(".hq"))}else $.conceal(u.closest(".hq"),s.closest(".hq"))}else $.conceal(l.closest(".hq"),u.closest(".hq"),s.closest(".hq"));$.reveal(i);const z=h.querySelectorAll(".pv");for(let e=1;e<z.length;e++)z[e].remove();let I=0,Z=1/0,j=-1/0,D=0,R=0;const T=z[0];for(let t=0;t<b.length;t++){const o=b[t],r=T.cloneNode(!0);let c=0;t===b.length-1?c=Number((100-I).toFixed(2)):f>0&&(c=(o.invested/f*100).toFixed(2),I+=Number(c)),Z>c&&(Z=c,D=o.buyPrice),j<c&&(j=c,R=o.buyPrice);const n=r.querySelector(".pj"),l=r.querySelector(".pz"),u=r.querySelector(".dt"),s=r.querySelector(".dr");if(r.querySelector(".pm").textContent=`${N(t+1)} Purchase`,r.querySelector(".pb").textContent=o.buyPrice.toLocaleString(),r.querySelector(".px").textContent=o.quantity.toLocaleString(),r.querySelector(".p_").textContent=Number(o.invested).toLocaleString(),r.querySelector(".di").textContent=`${Number(c)}%`,"basic"===e?$.conceal(n,l,u,s):$.reveal(n,l,u,s),"advanced"===e&&P>0){const e=r.querySelector(".de"),t=r.querySelector(".dn"),c=(P*o.quantity).toFixed(2),n=(c-o.invested).toFixed(2),l=(n/o.invested*100).toFixed(2);r.querySelector(".pq").textContent=Number(c).toLocaleString(),e.textContent=`${n>=0?"+":""}${Number(n).toLocaleString()}`,t.textContent=`${l>=0?"+":""}${Number(l).toLocaleString()}%`,e.classList.toggle("pt",n>0),e.classList.toggle("pn",n<0),t.classList.toggle("pt",n>0),t.classList.toggle("pn",n<0)}else $.conceal(n,l,u);h.querySelector(".pd").appendChild(r)}T.remove();const M=v.querySelector(".do"),O=v.querySelector(".dd"),U=v.querySelector(".dm"),V=v.querySelector(".dy");if("basic"===e?$.conceal(M,O,U,V):$.reveal(M,O,U,V),v.querySelector(".df").textContent=A,v.querySelector(".dc").textContent=E,v.querySelector(".dp").textContent=k,"advanced"===e&&P>0){const e=P*x,t=e-f,o=t/f*100,r=v.querySelector(".dg"),c=v.querySelector(".db");v.querySelector(".du").textContent=P.toLocaleString(),v.querySelector(".dv").textContent=Number(e).toLocaleString(),r.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,c.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,r.classList.toggle("pt",t>0),r.classList.toggle("pn",t<0),c.classList.toggle("pt",t>0),c.classList.toggle("pn",t<0)}else $.conceal(M,O,U,V);if(R===D?$.conceal(g.querySelector(".vs"),g.querySelector(".vu")):($.reveal(g.querySelector(".vs"),g.querySelector(".vu")),g.querySelector(".vo").textContent=Number(R).toLocaleString(),g.querySelector(".va").textContent=Number(D).toLocaleString()),L===p?$.conceal(g.querySelector(".vf"),g.querySelector(".vc")):($.reveal(g.querySelector(".vf"),g.querySelector(".vc")),g.querySelector(".vl").textContent=Number(L).toLocaleString(),g.querySelector(".vh").textContent=Number(p).toLocaleString()),"advanced"===e&&(_>0||w>0)){const e=_+w,t=(f+e)/x,o=t-F;if(m.querySelector(".dk").textContent=e.toLocaleString(),m.querySelector(".dz").textContent=Number(t.toFixed(2)).toLocaleString(),m.querySelector(".dj").textContent=Number(o.toFixed(2)).toLocaleString(),P>0){const t=P*x-f-e,o=t/f*100;m.querySelector(".vt").textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,m.querySelector(".vr").textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(m.querySelector(".ve"),m.querySelector(".vn"))}else $.conceal(m.querySelector(".ve"),m.querySelector(".vn"));$.reveal(m)}else $.conceal(m);$.reveal(y,h,v),R!==D||L!==p?$.reveal(g):$.conceal(g)}$.qs("#te").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tm").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),b(),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),k(t)})),a.addEventListener("click",(()=>{!function(){const e=$.qs(".ht");let t=N(e.children.length+1);const o=$.qs(".hn").cloneNode(!0);o.querySelector(".hi").textContent=`${t} Purchase`,t=t.toLowerCase(),o.querySelector(".ha").setAttribute("for",`${t}-purchase`),o.querySelector(".hh").id=`${t}-purchase`,o.querySelector(".hp").setAttribute("for",`${t}-quantity`),o.querySelector(".hd").id=`${t}-quantity`,o.querySelector(".hh").value="",o.querySelector(".hd").value="",e.appendChild(o),F(o,e),E()}()})),f.addEventListener("click",(()=>{P()})),x.addEventListener("click",(()=>{!function(){const e=$.qsa(".hn");for(const t of e){const e=t.querySelector(".hh"),o=t.querySelector(".hd");e.value=0,o.value=0}t.textContent=0,o.textContent=0,r.textContent=0,d.value=0,S.value=0,q.value=0,$.conceal(c.closest(".hq"),n.closest(".hq"),l.closest(".hq"),u.closest(".hq"),s.closest(".hq"),i,y,h,v,m,g);const a=h.querySelectorAll(".pv");for(let e=1;e<a.length;e++)a[e].remove()}()}));for(const e of L)e.addEventListener("change",(e=>{b(e.target.value)}));const p=sessionStorage.getItem("currency-preference");p&&(e.value=p,k(p)),i.addEventListener("click",(function(){y.scrollIntoView({behavior:"smooth"})}))}()}))}();