document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#te"),t=$.qs("#in"),o=$.qs("#ix"),r=$.qs("#iw"),c=$.qs("#ts"),n=$.qs("#ik"),l=$.qs("#t"),u=$.qs("#ti"),s=$.qs("#x"),a=$.qs("#io"),i=$.qs("#th"),S=$.qs(".dc"),d=$.qs(".dh"),y=$.qs(".dp"),m=$.qs(".dd"),q=$.qs("#rc"),v=$.qs("#_"),g=$.qsa(".mq"),x=$.qs(".ma");function f(){for(const e of g)if(e.checked)return e.value;return null}function L(e){"basic"===(e=e||f())?$.conceal(c.closest(".py"),n.closest(".py"),x):$.reveal(x),$.conceal(i)}function C(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,o=e%100;return 1===t&&11!==o?"st_conflict":2===t&&12!==o?"nd_conflict":3===t&&13!==o?"rd_conflict":"th"})();return`${e}${t}`}function p(){const e=$.qs(".pf");let t=C(e.children.length+1);const o=$.qs(".pl").cloneNode(!0),r=o.querySelector(".m_"),c=document.createElement("img");c.classList.add("dt"),c.setAttribute("src","/assets/images/a6d3e123.svg"),r.textContent=`${t} Purchase`,r.after(c),c.addEventListener("click",(()=>{e.removeChild(o),function(){const e=$.qsa(".pl");for(let t=0;t<e.length;t++){const o=e[t],r=o.querySelector(".m_");let c=C(t+1);r.textContent=`${c} Purchase`,c=c.toLowerCase(),o.querySelector(".mp").setAttribute("for",`${c}-purchase`),o.querySelector(".my").id=`${c}-purchase`,o.querySelector(".md").setAttribute("for",`${c}-quantity`),o.querySelector(".mu").id=`${c}-quantity`}}(),b()})),t=t.toLowerCase(),o.querySelector(".mp").setAttribute("for",`${t}-purchase`),o.querySelector(".my").id=`${t}-purchase`,o.querySelector(".md").setAttribute("for",`${t}-quantity`),o.querySelector(".mu").id=`${t}-quantity`,o.querySelector(".my").value=0,o.querySelector(".mu").value=0,e.appendChild(o)}function h(e){const t=$.qsa(".mm");for(let o=0;o<t.length;o++){t[o].textContent=e}}function b(){const e=f(),l=$.qsa(".pl");let q=0,v=0,g=1/0,x=-1/0;const L=[];for(const e of l){const t=e.querySelector(".my"),o=e.querySelector(".mu"),r=parseFloat(t.value||0),c=parseFloat(o.value||0);q+=c,v+=r*c,g>r&&(g=r),x<r&&(x=r),L.push({buyPrice:r,quantity:c,invested:(r*c).toFixed(2)})}if(!v||!q)return;const p=q>0?v/q:0,h=Number(p.toFixed(2)).toLocaleString(),b=Number(q.toFixed(2)).toLocaleString(),N=Number(v.toFixed(2)).toLocaleString();t.textContent=h,o.textContent=b,r.textContent=N;const F=parseFloat(u.value||0);if(F>0&&q>0){const e=F*q-v,t=e/v*100;c.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,n.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,c.classList.toggle("mf",e>0),c.classList.toggle("ml",e<0),n.classList.toggle("mf",t>0),n.classList.toggle("ml",t<0),$.reveal(c.closest(".py"),n.closest(".py"))}else $.conceal(c.closest(".py"),n.closest(".py"));const A=S.querySelectorAll(".p_");for(let e=1;e<A.length;e++)A[e].remove();let _=0,E=1/0,k=-1/0,P=0,w=0;const z=A[0];for(let t=0;t<L.length;t++){const o=L[t],r=z.cloneNode(!0);let c=0;t===L.length-1?c=Number((100-_).toFixed(2)):v>0&&(c=(o.invested/v*100).toFixed(2),_+=Number(c)),E>c&&(E=c,P=o.buyPrice),k<c&&(k=c,w=o.buyPrice);const n=r.querySelector(".dx"),l=r.querySelector(".d_"),u=r.querySelector(".dq"),s=r.querySelector(".ve");if(r.querySelector(".pj").textContent=`${C(t+1)} Purchase`,r.querySelector(".dm").textContent=o.buyPrice.toLocaleString(),r.querySelector(".dy").textContent=o.quantity.toLocaleString(),r.querySelector(".dw").textContent=Number(o.invested).toLocaleString(),r.querySelector(".vt").textContent=`${Number(c)}%`,"basic"===e?$.conceal(n,l,u,s):$.reveal(n,l,u,s),"advanced"===e&&F>0){const e=r.querySelector(".dj"),t=r.querySelector(".dz"),c=(F*o.quantity).toFixed(2),n=(c-o.invested).toFixed(2),l=(n/o.invested*100).toFixed(2);r.querySelector(".dk").textContent=Number(c).toLocaleString(),e.textContent=`${n>=0?"+":""}${Number(n).toLocaleString()}`,t.textContent=`${l>=0?"+":""}${Number(l).toLocaleString()}%`,e.classList.toggle("mf",n>0),e.classList.toggle("ml",n<0),t.classList.toggle("mf",n>0),t.classList.toggle("ml",n<0)}else $.conceal(n,l,u);S.appendChild(r)}z.remove();const j=d.querySelector(".vn"),I=d.querySelector(".vl"),Z=d.querySelector(".vh"),D=d.querySelector(".vd");if("basic"===e?$.conceal(j,I,Z,D):$.reveal(j,I,Z,D),d.querySelector(".vs").textContent=h,d.querySelector(".vu").textContent=b,d.querySelector(".vf").textContent=N,"advanced"===e&&F>0){const e=F*q,t=e-v,o=t/v*100,r=d.querySelector(".vp"),c=d.querySelector(".vv");d.querySelector(".vr").textContent=F.toLocaleString(),d.querySelector(".vc").textContent=Number(e).toLocaleString(),r.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,c.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,r.classList.toggle("mf",t>0),r.classList.toggle("ml",t<0),c.classList.toggle("mf",t>0),c.classList.toggle("ml",t<0)}else $.conceal(j,I,Z,D);w===P?$.conceal(m.querySelector(".vz"),m.querySelector(".mt")):($.reveal(m.querySelector(".vz"),m.querySelector(".mt")),m.querySelector(".me").textContent=Number(w).toLocaleString(),m.querySelector(".mn").textContent=Number(P).toLocaleString()),g===x?$.conceal(m.querySelector(".mr"),m.querySelector(".ms")):($.reveal(m.querySelector(".mr"),m.querySelector(".ms")),m.querySelector(".mi").textContent=Number(g).toLocaleString(),m.querySelector(".mo").textContent=Number(x).toLocaleString());const T=parseFloat(s.value||0),M=parseFloat(a.value||0);if("advanced"===e&&(T>0||M>0)){const e=T+M,t=(v+e)/q,o=t-p;if(y.querySelector(".vg").textContent=e.toLocaleString(),y.querySelector(".vx").textContent=Number(t.toFixed(2)).toLocaleString(),y.querySelector(".vb").textContent=Number(o.toFixed(2)).toLocaleString(),F>0){const t=F*q-v-e,o=t/v*100;y.querySelector(".v_").textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,y.querySelector(".vq").textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,$.reveal(y.querySelector(".vk"),y.querySelector(".vj"))}else $.conceal(y.querySelector(".vk"),y.querySelector(".vj"));$.reveal(y)}else $.conceal(y);$.reveal(i,S,d),w!==P||g!==x?$.reveal(m):$.conceal(m)}$.qs("#q").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tp").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),L(),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),h(t)})),l.addEventListener("click",(()=>{p()})),v.addEventListener("click",(()=>{b()})),q.addEventListener("click",(()=>{!function(){const e=$.qsa(".pl");for(const t of e){const e=t.querySelector(".my"),o=t.querySelector(".mu");e.value=0,o.value=0}t.textContent=0,o.textContent=0,r.textContent=0,u.value=0,$.conceal(c.closest(".py"),n.closest(".py"),i,S,d,y,m);const l=S.querySelectorAll(".p_");for(let e=1;e<l.length;e++)l[e].remove()}()}));for(const e of g)e.addEventListener("change",(e=>{L(e.target.value)}));const s=sessionStorage.getItem("currency-preference");s&&(e.value=s,h(s))}()}));