document.addEventListener("DOMContentLoaded",(function(){const t=$.qs("#header-menu-btn"),e=$.qs("#header-mobile-sidebar"),s=$.qs("#csv-to-json-link"),o=$.qs("#json-to-csv-link"),a=$.qs("#tools-dropdown-btn"),n=$.qs("#tools-dropdown-list"),r=$.qs("#spotlight-search-btn"),i=$.qs("#spotlight-search-btn-compact"),c=$.qs("#spotlight-ui"),d=$.qs("#spotlight-backdrop"),l=$.qs("#spotlight-container"),u=$.qs("#spotlight-palette"),p=$.qs("#spotlight-search-input"),b=$.qs("#spotlight-no-results"),h=$.qs("#spotlight-results"),m=$.qs("#settings-dropdown-btn"),g=$.qs("#settings-dropdown-list"),v=$.qs("#back-to-top-toggle"),f=$.qs("#sticky-header-toggle"),k=$.qs("#back-to-top-toggle-mobile"),y=$.qs("#sticky-header-toggle-mobile"),A=$.qs("#back-to-top-btn"),w=$.qs("#tools-dropdown-btn-mobile"),S=$.qs("#tools-dropdown-list-mobile"),L=$.qs("#settings-dropdown-btn-mobile"),E=$.qs("#settings-dropdown-list-mobile");let q=-1,x=!1;function _(t,e="desktop"){switch(t){case"tools":"desktop"===e?(a.setAttribute("aria-expanded","true"),n.setAttribute("data-state","visible")):(w.setAttribute("aria-expanded","true"),S.setAttribute("data-state","visible"));break;case"settings":"desktop"===e?(m.setAttribute("aria-expanded","true"),g.setAttribute("data-state","visible")):(L.setAttribute("aria-expanded","true"),E.setAttribute("data-state","visible"))}}function I(t,e="desktop"){switch(t){case"tools":"desktop"===e?(a.setAttribute("aria-expanded","false"),n.setAttribute("data-state","invisible")):(w.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"));break;case"settings":"desktop"===e?(m.setAttribute("aria-expanded","false"),g.setAttribute("data-state","invisible")):(L.setAttribute("aria-expanded","false"),E.setAttribute("data-state","invisible"));break;default:"desktop"===e?(a.setAttribute("aria-expanded","false"),n.setAttribute("data-state","invisible"),m.setAttribute("aria-expanded","false"),g.setAttribute("data-state","invisible")):"mobile"===e?(w.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"),L.setAttribute("aria-expanded","false"),E.setAttribute("data-state","invisible")):(a.setAttribute("aria-expanded","false"),n.setAttribute("data-state","invisible"),m.setAttribute("aria-expanded","false"),g.setAttribute("data-state","invisible"),w.setAttribute("aria-expanded","false"),S.setAttribute("data-state","invisible"),L.setAttribute("aria-expanded","false"),E.setAttribute("data-state","invisible"))}}function D(){x&&(x=!1)}function T(){c.setAttribute("aria-expanded","true"),document.body.classList.add("noscroll"),document.addEventListener("mousemove",D),setTimeout((()=>{p.focus()}),300),p.dispatchEvent(new InputEvent("input",{bubbles:!0,cancelable:!0,data:""}))}function O(){u.style.transform="scale(95%)",setTimeout((()=>{d.style.opacity="0"}),300),setTimeout((()=>{u.removeAttribute("style"),d.removeAttribute("style"),c.setAttribute("aria-expanded","false"),p.value="",h.innerHTML="",q=-1,x=!1,document.body.classList.remove("noscroll"),document.removeEventListener("mousemove",D)}),450)}d.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),l.contains(t.target)||O()})),t.addEventListener("click",(function(t){"open"===e.getAttribute("data-state")?(_("tools","mobile"),I("settings","mobile"),this.setAttribute("data-state","inactive"),e.setAttribute("data-state","close")):(this.setAttribute("data-state","active"),e.setAttribute("data-state","open"))})),s.addEventListener("mouseenter",(function(){I("all","desktop")})),o.addEventListener("mouseenter",(function(){I("all","desktop")})),a.addEventListener("mouseenter",(function(t){I("all","desktop"),_("tools","desktop")})),n.addEventListener("mouseleave",(function(t){I("tools","desktop")})),a.addEventListener("click",(function(t){t.stopPropagation(),"true"===this.getAttribute("aria-expanded")?I("tools","desktop"):_("tools","desktop")})),r.addEventListener("mouseenter",(function(){I("all","desktop")})),r.addEventListener("click",(function(){T()})),i.addEventListener("mouseenter",(function(){I("all","desktop")})),i.addEventListener("click",(function(){T()})),m.addEventListener("mouseenter",(function(t){I("all","desktop"),_("settings","desktop")})),g.addEventListener("mouseleave",(function(t){I("settings","desktop")})),m.addEventListener("click",(function(t){t.stopPropagation(),"true"===this.getAttribute("aria-expanded")?I("settings","desktop"):_("settings","desktop")})),w.addEventListener("click",(function(t){"true"===this.getAttribute("aria-expanded")?I("tools","mobile"):_("tools","mobile")})),L.addEventListener("click",(function(t){"true"===this.getAttribute("aria-expanded")?I("settings","mobile"):_("settings","mobile")})),f.addEventListener("change",(function(t){const e=t.target.checked;e?$.qs(".body-component").setAttribute("data-sticky-header","true"):$.qs(".body-component").setAttribute("data-sticky-header","false"),window.localStorage.setItem("sticky-header",e)})),y.addEventListener("change",(function(t){const e=t.target.checked;e?$.qs(".body-component").setAttribute("data-sticky-header","true"):$.qs(".body-component").setAttribute("data-sticky-header","false"),window.localStorage.setItem("sticky-header",e)})),v.addEventListener("change",(function(t){window.localStorage.setItem("return-to-top",t.target.checked),t.target.checked&&window.scrollY>200?A.classList.add("appear"):t.target.checked||A.classList.remove("appear")})),k.addEventListener("change",(function(t){window.localStorage.setItem("return-to-top",t.target.checked),t.target.checked&&window.scrollY>200?A.classList.add("appear"):t.target.checked||A.classList.remove("appear")})),A.addEventListener("click",(function(t){t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(function(){"true"===window.localStorage.getItem("return-to-top")&&(window.scrollY>200?A.classList.add("appear"):A.classList.remove("appear"))})),document.addEventListener("keydown",(function(s){if("true"===c.getAttribute("aria-expanded"))return function(t){if("Escape"===t.key)return t.preventDefault(),void(0===p.value.length?O():(p.value="",p.dispatchEvent(new InputEvent("input",{bubbles:!0,cancelable:!0,data:""})),q=-1));const e=h.querySelectorAll(".spotlight-search__palette-results--entry");if(e.length)switch("ArrowUp"!==t.key&&"ArrowDown"!==t.key||(x=!0),t.key){case"ArrowUp":t.preventDefault(),q=(q-1+e.length)%e.length,s(e);break;case"ArrowDown":t.preventDefault(),q=(q+1)%e.length,s(e);break;case"Enter":t.preventDefault(),q>=0&&e[q]&&e[q].click()}function s(t){for(let e=0;e<t.length;e++){const s=t[e];e===q?(s.classList.add("focused"),s.scrollIntoView({block:"nearest"})):s.classList.remove("focused")}}}(s);"Escape"===s.key?(s.preventDefault(),I("all"),t.setAttribute("data-state","inactive"),e.setAttribute("data-state","close")):(s.ctrlKey||s.metaKey)&&"K"===s.key.toUpperCase()&&(s.preventDefault(),r.click())})),document.addEventListener("click",(function(t){"true"===a.getAttribute("aria-expanded")&&(a.contains(t.target)||n.contains(t.target)||I("tools","desktop")),"true"===m.getAttribute("aria-expanded")&&(m.contains(t.target)||g.contains(t.target)||I("settings","desktop"))})),null===window.localStorage.getItem("return-to-top")||"true"===window.localStorage.getItem("return-to-top")?(v.setAttribute("checked",""),k.setAttribute("checked",""),null===window.localStorage.getItem("return-to-top")&&window.localStorage.setItem("return-to-top",!0)):(v.removeAttribute("checked"),k.removeAttribute("checked")),"true"===window.localStorage.getItem("sticky-header")?(f.setAttribute("checked",""),y.setAttribute("checked",""),$.qs(".body-component").setAttribute("data-sticky-header","true")):(f.removeAttribute("checked"),y.removeAttribute("checked"),$.qs(".body-component").setAttribute("data-sticky-header","false")),async function(){const t=await async function(){let t=sessionStorage.getItem("search-data");if(t)try{return JSON.parse(t)}catch(t){}try{const t=await fetch("/data/search.json",{method:"GET",headers:{"Content-Type":"application/json"}}),e=await t.json();return sessionStorage.setItem("search-data",JSON.stringify(e)),e}catch(t){return null}}(),e=Array.from({length:t.length},((t,e)=>e)),s=function(t){const e=new FlexSearch.Index({tokenize:"forward",cache:!0});try{const t=sessionStorage.getItem("search-index");if(!t||0===t.length)throw new Error("Invalid search data found!");const s=JSON.parse(t);for(const[t,o]of Object.entries(s))e.import(t,o)}catch(s){for(let s of t)e.add(s.id,s.title);const o={};e.export(((t,e)=>{o[t]=JSON.parse(e),sessionStorage.setItem("search-index",JSON.stringify(o))}))}return e}(t);p.addEventListener("input",(function(o){x=!1;const a=this.value.trim(),n=""===a?e:s.search(a);h.innerHTML=function(t,e){if(0===e.length)return $.conceal(h),void $.reveal(b);$.conceal(b),$.reveal(h);const s={};for(const o of e){const e=t[o];let a=e.category.charAt(0).toUpperCase()+e.category.slice(1).toLowerCase();s[a]||(s[a]=[]),s[a].push(e)}let o="";for(const t in s){s[t]?.length&&"/"!==s[t][0]?.root?o+=`<li><div class="spotlight-search__palette-results-section"><h2 class="spotlight-search__palette-results-section--title">${t}</h2><a class="spotlight-search__palette-results-section--link" href="${s[t][0]?.root}"><img class="spotlight-search__palette-results-section--icon" src="/assets/images/d6c74136.svg" /></a></div><ul>`:o+=`<li><div class="spotlight-search__palette-results-section"><h2 class="spotlight-search__palette-results-section--title">${t}</h2></div><ul>`;for(let e of s[t])o+=`<div class="spotlight-search__palette-results--entry" data-location="${e.location}">${e.title}</div>`;o+="</ul></li>"}return o}(t,n),function(){const t=h.querySelectorAll(".spotlight-search__palette-results-section--link");for(let e=0;e<t.length;e++){const s=t[e];s.addEventListener("click",(()=>{window.open(s.getAttribute("href"),"_self")}))}const e=h.querySelectorAll(".spotlight-search__palette-results--entry");for(let t=0;t<e.length;t++){const s=e[t];s.addEventListener("mouseenter",(()=>{if(!x){for(let t=0;t<e.length;t++)e[t].classList.remove("focused");s.classList.add("focused"),q=t}})),s.addEventListener("mouseleave",(()=>{x||(s.classList.remove("focused"),q=-1)})),s.addEventListener("click",(()=>{x=!1,s.getAttribute("data-location")&&window.open(s.getAttribute("data-location"),"_self")}))}}()}))}()}));