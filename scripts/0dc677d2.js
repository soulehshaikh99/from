document.addEventListener("DOMContentLoaded",(function(){const e=$.qs("#tt"),t=$.qs("#if"),o=$.qs("#st"),c=$.qs("#iz"),l=$.qs("#to"),r=$.qs("#sn"),n=$.qs("#t"),a=$.qs("#ts"),u=$.qs("#tp"),s=$.qs(".stockavgcal-output__investment-breakdown"),i=$.qs(".stockavgcal-output__portfolio-summary"),v=$.qs(".stockavgcal-output__breakeven-metrics"),d=$.qs(".stockavgcal-output__price-insights"),g=$.qs("#ry"),y=$.qs("#_"),S=$.qsa(".hl"),q=$.qs(".stockavgcal__advanced-paramters");function m(){for(const e of S)if(e.checked)return e.value;return null}function _(e){"basic"===(e=e||m())?$.conceal(l.closest(".pl"),r.closest(".pl"),q):$.reveal(q),$.conceal(u)}function p(e=1){if(e>=1&&e<=10)return["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth"][e-1];const t=(()=>{const t=e%10,o=e%100;return 1===t&&11!==o?"st_conflict":2===t&&12!==o?"nd_conflict":3===t&&13!==o?"rd_conflict":"th"})();return`${e}${t}`}function h(){const e=$.qs(".hw");let t=p(e.children.length+1);const o=$.qs(".hx").cloneNode(!0),c=o.querySelector(".h_"),l=document.createElement("img");l.classList.add("stockavgcal__purchase-remove"),l.setAttribute("src","/assets/images/a6d3e123.svg"),c.textContent=`${t} Purchase`,c.after(l),l.addEventListener("click",(()=>{e.removeChild(o),function(){const e=$.qsa(".hx");for(let t=0;t<e.length;t++){const o=e[t],c=o.querySelector(".h_");let l=p(t+1);c.textContent=`${l} Purchase`,l=l.toLowerCase(),o.querySelector(".pe").setAttribute("for",`${l}-purchase`),o.querySelector(".ps").id=`${l}-purchase`,o.querySelector(".pt").setAttribute("for",`${l}-quantity`),o.querySelector(".stockavgcal__purchase-quantity").id=`${l}-quantity`}}(),x()})),t=t.toLowerCase(),o.querySelector(".pe").setAttribute("for",`${t}-purchase`),o.querySelector(".ps").id=`${t}-purchase`,o.querySelector(".pt").setAttribute("for",`${t}-quantity`),o.querySelector(".stockavgcal__purchase-quantity").id=`${t}-quantity`,o.querySelector(".ps").value=0,o.querySelector(".stockavgcal__purchase-quantity").value=0,e.appendChild(o)}function f(e){const t=$.qsa(".pr");for(let o=0;o<t.length;o++){t[o].textContent=e}}function x(){const e=m(),n=$.qsa(".hx");let v=0,d=0;const g=[];for(const e of n){const t=e.querySelector(".ps"),o=e.querySelector(".stockavgcal__purchase-quantity"),c=parseFloat(t.value||0),l=parseFloat(o.value||0);v+=l,d+=c*l,g.push({buyPrice:c,quantity:l,invested:(c*l).toFixed(2)})}if(!d||!v)return;const y=Number((v>0?d/v:0).toFixed(2)).toLocaleString(),S=Number(v.toFixed(2)).toLocaleString(),q=Number(d.toFixed(2)).toLocaleString();t.textContent=y,o.textContent=S,c.textContent=q;const _=parseFloat(a.value||0);if(_>0&&v>0){const e=_*v-d,t=e/d*100;l.textContent=`${e>=0?"+":""}${Number(e.toFixed(2)).toLocaleString()}`,r.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}%`,l.classList.toggle("in-profit",e>0),l.classList.toggle("in-loss",e<0),r.classList.toggle("in-profit",t>0),r.classList.toggle("in-loss",t<0),$.reveal(l.closest(".pl"),r.closest(".pl"))}else $.conceal(l.closest(".pl"),r.closest(".pl"));const h=s.querySelectorAll(".pv");for(let e=1;e<h.length;e++)h[e].remove();let f=0;const x=h[0];for(let t=0;t<g.length;t++){const o=g[t],c=x.cloneNode(!0);let l=0;t===g.length-1?l=Number((100-f).toFixed(2)):d>0&&(l=(o.invested/d*100).toFixed(2),f+=Number(l));const r=c.querySelector(".stockavgcal__current-column"),n=c.querySelector(".stockavgcal__current-pl-column"),a=c.querySelector(".stockavgcal__net-change-column"),u=c.querySelector(".stockavgcal__allocation-column");if(c.querySelector(".pm").textContent=`${p(t+1)} Purchase`,c.querySelector(".stockavgcal__buy-price-value").textContent=o.buyPrice.toLocaleString(),c.querySelector(".stockavgcal__quantity-value").textContent=o.quantity.toLocaleString(),c.querySelector(".stockavgcal__invested-value").textContent=Number(o.invested).toLocaleString(),c.querySelector(".stockavgcal__allocation-value").textContent=`${Number(l)}%`,"basic"===e?$.conceal(r,n,a,u):$.reveal(r,n,a,u),"advanced"===e&&_>0){const e=c.querySelector(".stockavgcal__current-pl-value"),t=c.querySelector(".stockavgcal__net-change-value"),l=(_*o.quantity).toFixed(2),r=(l-o.invested).toFixed(2),n=(r/o.invested*100).toFixed(2);c.querySelector(".stockavgcal__current-value").textContent=Number(l).toLocaleString(),e.textContent=`${r>=0?"+":""}${Number(r).toLocaleString()}`,t.textContent=`${n>=0?"+":""}${Number(n).toLocaleString()}%`,e.classList.toggle("in-profit",r>0),e.classList.toggle("in-loss",r<0),t.classList.toggle("in-profit",r>0),t.classList.toggle("in-loss",r<0)}else $.conceal(r,n,a);s.appendChild(c)}x.remove();const k=i.querySelector(".stockavgcal__cmp-column"),L=i.querySelector(".stockavgcal__total-column"),C=i.querySelector(".stockavgcal__total-pl-column"),b=i.querySelector(".stockavgcal__total-return-column");if("basic"===e?$.conceal(k,L,C,b):$.reveal(k,L,C,b),i.querySelector(".stockavgcal__average-buy-price-value").textContent=y,i.querySelector(".stockavgcal__total-quantity-value").textContent=S,i.querySelector(".stockavgcal__total-invested-value").textContent=q,"advanced"===e&&_>0){const e=_*v,t=e-d,o=t/d*100,c=i.querySelector(".stockavgcal__total-pl-value"),l=i.querySelector(".stockavgcal__total-return-value");i.querySelector(".stockavgcal__cmp-value").textContent=_.toLocaleString(),i.querySelector(".stockavgcal__total-value").textContent=Number(e).toLocaleString(),c.textContent=`${t>=0?"+":""}${Number(t.toFixed(2)).toLocaleString()}`,l.textContent=`${o>=0?"+":""}${Number(o.toFixed(2)).toLocaleString()}%`,c.classList.toggle("in-profit",t>0),c.classList.toggle("in-loss",t<0),l.classList.toggle("in-profit",t>0),l.classList.toggle("in-loss",t<0)}else $.conceal(k,L,C,b);$.reveal(u,s,i)}$.qs("#z").addEventListener("submit",(function(e){e.preventDefault();const t=$.qs("#tv").value;/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?window.location.href="/contact-us.html?email="+encodeURIComponent(t):alert("Please enter a valid email address.")})),_(),function(){e.addEventListener("change",(e=>{const t=e.target.value;t&&sessionStorage.setItem("currency-preference",t),f(t)})),n.addEventListener("click",(()=>{h()})),y.addEventListener("click",(()=>{x()})),g.addEventListener("click",(()=>{!function(){const e=$.qsa(".hx");for(const t of e){const e=t.querySelector(".ps"),o=t.querySelector(".stockavgcal__purchase-quantity");e.value=0,o.value=0}t.textContent=0,o.textContent=0,c.textContent=0,a.value=0,$.conceal(l.closest(".pl"),r.closest(".pl"),u,s,i,v,d);const n=s.querySelectorAll(".pv");for(let e=1;e<n.length;e++)n[e].remove()}()}));for(const e of S)e.addEventListener("change",(e=>{_(e.target.value)}));const q=sessionStorage.getItem("currency-preference");q&&(e.value=q,f(q))}()}));